# Blog Posts Collection
# Blog posts managed through the CMS
- name: 'post'
  label: 'Blog Posts'
  label_singular: 'Blog Post'
  folder: 'src/data/post'
  create: true
  delete: true
  slug: '{{slug}}'
  extension: 'md'
  format: 'frontmatter'
  preview_path: '/{{slug}}'
  sortable_fields: ['publishDate', 'title']
  view_filters:
    - label: 'Published'
      field: draft
      pattern: false
    - label: 'Drafts'
      field: draft
      pattern: true
  fields:
    # Core Fields
    - { label: 'Title', name: 'title', widget: 'string', hint: 'The main title of your blog post' }
    - {
        label: 'Excerpt',
        name: 'excerpt',
        widget: 'text',
        hint: 'A brief summary that appears in blog lists and social shares',
        pattern: ['.{50,160}', 'Must be between 50 and 160 characters'],
      }
    - {
        label: 'Category',
        name: 'category',
        widget: 'select',
        options: ['Tutorials', 'News', 'Updates', 'Resources'],
        hint: 'Main category for this post',
      }
    - {
        label: 'Tags',
        name: 'tags',
        widget: 'list',
        default: [],
        hint: 'Add tags to help readers find related content',
        min: 1,
        max: 5,
      }

    # Image Field
    - {
        label: 'Featured Image',
        name: 'image',
        widget: 'image',
        required: false,
        hint: 'Main image for the post. Will be automatically optimised for different screen sizes.',
        media_library: { config: {
                max_file_size: 5120000, # 5MB max
              } },
      }

    # Publishing Fields
    - {
        label: 'Publish Date',
        name: 'publishDate',
        widget: 'datetime',
        date_format: 'DD/MM/YYYY',
        time_format: false,
        hint: 'When this post should be published',
      }
    - { label: 'Author', name: 'author', widget: 'string', default: 'Team', hint: 'Author name to display' }
    - {
        label: 'Draft',
        name: 'draft',
        widget: 'boolean',
        default: false,
        hint: 'Set to true to hide from production site',
      }

    # Content
    - {
        label: 'Content',
        name: 'body',
        widget: 'markdown',
        hint: 'The main content of your blog post. Supports full markdown.',
        editor_components: ['image', 'code-block'],
      }

    # SEO Metadata (Optional)
    - label: 'SEO Metadata'
      name: 'metadata'
      widget: 'object'
      collapsed: true
      required: false
      hint: 'Optional SEO settings to override defaults'
      fields:
        - {
            label: 'Canonical URL',
            name: 'canonical',
            widget: 'string',
            required: false,
            pattern: ['^https?://.+$', 'Must be a valid URL'],
            hint: 'Use if this content is published elsewhere',
          }
        - {
            label: 'No Index',
            name: 'noindex',
            widget: 'boolean',
            required: false,
            hint: 'Prevent search engines from indexing this page',
          }
