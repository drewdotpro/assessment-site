<script is:inline>
  const fonts = ['sylexiad', 'opendyslexic', 'fastsans'];
  const fontFamilies = {
    sylexiad: "'Sylexiad Sans Medium', ui-sans-serif, system-ui, sans-serif",
    opendyslexic: "'OpenDyslexic3', ui-sans-serif, system-ui, sans-serif",
    fastsans: "'Fast Sans', ui-sans-serif, system-ui, sans-serif"
  };

  function applyFont(fontKey) {
    const root = document.documentElement;
    root.style.setProperty('--aw-font-sans', fontFamilies[fontKey]);
    root.style.setProperty('--aw-font-serif', fontFamilies[fontKey]);
  }

  function updateDropdownHighlight(selectedFont) {
    const buttons = document.querySelectorAll('[data-font-button]');
    buttons.forEach(btn => {
      const font = btn.getAttribute('data-font-button');
      if (font === selectedFont) {
        btn.classList.add('text-primary', 'dark:text-primary');
        btn.classList.remove('text-muted', 'dark:text-gray-400');
      } else {
        btn.classList.remove('text-primary', 'dark:text-primary');
        btn.classList.add('text-muted', 'dark:text-gray-400');
      }
    });
  }

  const savedFont = localStorage.getItem('fontPreference') || 'sylexiad';
  if (fonts.includes(savedFont)) {
    applyFont(savedFont);
    // Update dropdown highlighting after DOM loads
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => updateDropdownHighlight(savedFont));
    } else {
      updateDropdownHighlight(savedFont);
    }
  }
</script>
